!function(e,t){var n,i,o,l,a=t.getElementById("width"),d=t.getElementById("container"),r=!1,c=parseInt(d.getAttribute("data-block-id"),10),s=new Image,m=t.getElementById("images"),u=c,g=t.getElementById("form"),h=function(){var e=t.documentElement.clientWidth||t.body.clientWidth;e<=0&&(e=960),a.value=e,d.style.width=e+"px"},p=function(e){var n=t.createElement("input");return n.type="image",n.name="image",n.width="60",n.height="60",n.src=e,n},y=function(e){return"/image.php?id="+e+"&rnd="+(new Date).getTime()},f=function(){4===this.readyState&&this.status>=200&&this.status<400&&"OK"==this.responseText&&(l.src=y(o))},w=function(e){var t=new XMLHttpRequest;return t.open("POST","/click.php?ajax=1&id="+o,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.onreadystatechange=f,t.send("image.x="+n+"&image.y="+i+"&width="+a.value+"&color=777777"),t=null,e.preventDefault&&e.preventDefault(),!1},E=function(e){if("input"==e.target.tagName.toLowerCase()&&"image"==e.target.type.toLowerCase()){var a=t.documentElement.clientWidth||t.body.clientWidth;n=e.pageX,i=(e.pageY-40)%a,o=Math.floor((e.pageY-40)/a)+c,o>278&&(o-=278),l=e.target}},v=function(){m.insertBefore(p(s.src),m.firstChild),e.scrollTo(0,t.documentElement.clientWidth||t.body.clientWidth);var n=m.getElementsByTagName("input");n.length>3&&(m.removeChild(n[n.length-1]),u=u<=1?278:u-1),r=!1},B=function(){m.appendChild(p(s.src));var n=m.getElementsByTagName("input");n.length>3&&(m.removeChild(n[0]),c=c>=278?1:c+1,e.scrollBy(0,-(t.documentElement.clientWidth||t.body.clientWidth))),r=!1},T=function(){if(!r){var e=t.documentElement.scrollTop||t.body.scrollTop,n=d.clientHeight-(t.documentElement.clientHeight||t.body.clientHeight);e<=0?(r=!0,c=c<=1?278:c-1,s.onload=v,s.src=y(c)):e>=n-30&&(r=!0,u=u>=278?1:u+1,s.onload=B,s.src=y(u))}},b=function(){r=!0,u=u>=278?1:u+1,s.onload=B,s.src=y(u)};t.getElementById("page-up").style.display="none",t.getElementById("page-down").style.display="none",e.onresize=h,e.onscroll=T,d.onclick=E,g.onsubmit=w,h(),b()}(window,document);