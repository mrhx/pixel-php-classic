!function(e,t){var n,i,o,l=t.getElementById("width"),a=t.getElementById("container"),d=!1,c=parseInt(a.getAttribute("data-block-id"),10),r=new Image,m=t.getElementById("images"),s=c,g=t.getElementById("form"),u=function(){var e=t.documentElement.clientWidth||t.body.clientWidth;e<=0&&(e=960),l.value=e,a.style.width=e+"px"},p=function(e){var n=t.createElement("input");return n.type="image",n.name="image",n.width="60",n.height="60",n.src=e,n},h=function(){4===this.readyState&&this.status>=200&&this.status<400},y=function(e){var t=new XMLHttpRequest;return t.open("POST","/click.php?ajax=1&id="+o,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.onreadystatechange=h,t.send("image.x="+n+"&image.y="+i+"&width="+l.value+"&color=777777"),t=null,e.preventDefault&&e.preventDefault(),!1},f=function(e){if("input"==e.target.tagName.toLowerCase()&&"image"==e.target.type.toLowerCase()){var l=t.documentElement.clientWidth||t.body.clientWidth;n=e.pageX,i=(e.pageY-40)%l,o=Math.floor((e.pageY-40)/l)+c,o>278&&(o-=278)}},E=function(){m.insertBefore(p(r.src),m.firstChild),e.scrollTo(0,t.documentElement.clientWidth||t.body.clientWidth);var n=m.getElementsByTagName("input");n.length>3&&(m.removeChild(n[n.length-1]),s=s<=1?278:s-1),d=!1},v=function(){m.appendChild(p(r.src));var n=m.getElementsByTagName("input");n.length>3&&(m.removeChild(n[0]),c=c>=278?1:c+1,e.scrollBy(0,-(t.documentElement.clientWidth||t.body.clientWidth))),d=!1},w=function(){if(!d){var e=t.documentElement.scrollTop||t.body.scrollTop,n=a.clientHeight-(t.documentElement.clientHeight||t.body.clientHeight);e<=0?(d=!0,c=c<=1?278:c-1,r.onload=E,r.src="/image.php?id="+c):e>=n-30&&(d=!0,s=s>=278?1:s+1,r.onload=v,r.src="/image.php?id="+s)}},B=function(){d=!0,s=s>=278?1:s+1,r.onload=v,r.src="/image.php?id="+s};t.getElementById("page-up").style.display="none",t.getElementById("page-down").style.display="none",e.onresize=u,e.onscroll=w,a.onclick=f,g.onsubmit=y,u(),B()}(window,document);